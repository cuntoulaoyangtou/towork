(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-452eaf75"],{"4f45":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return u}));var c=a("b775");function n(t){return Object(c["a"])({url:"/admin/curriculum/getcurriculums",method:"post",data:t})}function r(t){return Object(c["a"])({url:"/admin/curriculum/del",method:"post",data:t})}function i(t){return Object(c["a"])({url:"/admin/curriculum/update",method:"post",data:t})}function u(t){return Object(c["a"])({url:"/admin/curriculum/add",method:"post",data:t})}},7514:function(t,e,a){"use strict";var c=a("5ca1"),n=a("0a49")(5),r="find",i=!0;r in[]&&Array(1)[r]((function(){i=!1})),c(c.P+c.F*i,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"988c":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return i})),a.d(e,"a",(function(){return u})),a.d(e,"d",(function(){return l}));var c=a("b775");function n(t){return Object(c["a"])({url:"/admin/chapter/getchapters",method:"post",data:t})}function r(t){return Object(c["a"])({url:"/admin/chapter/del",method:"post",data:t})}function i(t){return Object(c["a"])({url:"/admin/chapter/update",method:"post",data:t})}function u(t){return Object(c["a"])({url:"/admin/chapter/add",method:"post",data:t})}function l(t){return Object(c["a"])({url:"/api/chapter/getchapters",method:"get",data:t})}},"9fa0":function(t,e,a){"use strict";var c=a("fac9"),n=a.n(c);n.a},fac9:function(t,e,a){},fe14:function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:10}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加章节")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.resetForm()}}},[t._v("清空")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-form",{ref:"chapter",attrs:{"label-position":"top","label-width":"80px",model:t.chapter}},[a("el-form-item",{attrs:{label:"章节名称"}},[a("el-input",{model:{value:t.chapter.ec_name,callback:function(e){t.$set(t.chapter,"ec_name",e)},expression:"chapter.ec_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input",{model:{value:t.chapter.ec_priority,callback:function(e){t.$set(t.chapter,"ec_priority",e)},expression:"chapter.ec_priority"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属课程"}},[a("el-select",{attrs:{placeholder:"请选择课程"},model:{value:t.chapter.cum_id,callback:function(e){t.$set(t.chapter,"cum_id",e)},expression:"chapter.cum_id"}},t._l(t.curriculums,(function(t,e){return a("el-option",{key:e,attrs:{label:t.cum_name,value:t.cum_id}})})),1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addAndUpdate}},[t._v(t._s(t.add?"添加":"更新"))])],1)],1)])],1),t._v(" "),a("el-col",{attrs:{span:14}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{staticClass:"ctlyt-line-h",attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("span",[t._v("所有章节")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择课程"},on:{change:t.curriculumChange},model:{value:t.page.cum_id,callback:function(e){t.$set(t.page,"cum_id",e)},expression:"page.cum_id"}},[a("el-option",{key:"curriculum",attrs:{label:"所有专业",value:0}}),t._v(" "),t._l(t.curriculums,(function(t,e){return a("el-option",{key:e,attrs:{label:t.cum_name,value:t.cum_id}})}))],2)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0","line-height":"36px"},attrs:{type:"text"},on:{click:t.mGetChapters}},[t._v("刷新")])],1)],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.chapters.filter((function(e){return!t.search||e.ec_name.toLowerCase().includes(t.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"编号",prop:"ec_id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"章节名称",prop:"ec_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"优先级",prop:"ec_priority"}}),t._v(" "),a("el-table-column",{attrs:{label:"课程名称",prop:"cum_name"}}),t._v(" "),a("el-table-column",{attrs:{align:"right",fixed:"right",width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),[a("el-popconfirm",{attrs:{title:"确定删除《"+e.row.ec_name+"》吗？"},on:{onConfirm:function(a){return t.handleDelete(e.$index,e.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"current-page":t.page.pageNo,"page-size":t.page.pageSize},on:{"prev-click":t.prevClick,"next-click":t.nextClick,"current-change":t.currentChange}})],1)])],1)],1)],1)},n=[],r=(a("7514"),a("ac6a"),a("988c")),i=a("4f45"),u={name:"Chapter",data:function(){return{page:{pageNo:1,pageSize:10,ec_name:null,cum_id:"",total:0},chapter:{ec_id:null,ec_name:"",ec_priority:"",cum_id:""},chapters:[],curriculums:[],add:!0,loading:!1,search:"",visible:!1}},created:function(){var t=this;Object(i["c"])({pageNo:1,pageSize:100,cum_name:null}).then((function(e){t.curriculums.length>0&&t.curriculums.splice(0,t.curriculums.length),e.data.list.forEach((function(e){t.curriculums.push(e)}))})).catch((function(){})),this.mGetChapters()},onload:function(){},mounted:function(){},methods:{handleEdit:function(t,e){this.chapter.ec_id=e.ec_id,this.chapter.ec_name=e.ec_name,this.chapter.ec_priority=e.ec_priority,this.chapter.cum_id=e.cum_id,this.add=!1},handleDelete:function(t,e){this.visible=!1,this.mDelChapter(e.ec_id)},mGetChapters:function(){var t=this;this.resetForm(),Object(r["c"])(this.page).then((function(e){t.chapters.length>0&&t.chapters.splice(0,t.chapters.length),t.page.total=e.data.total,e.data.list.forEach((function(e){e.cum_name=t.curriculums.find((function(t){return t.cum_id===e.cum_id})).cum_name,t.chapters.push(e)}))})).catch((function(){}))},mAddChapter:function(){var t=this;Object(r["a"])(this.chapter).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"添加成功",type:"success"}),t.mGetChapters())})).catch((function(){t.loading=!1}))},mUpdateChapter:function(){var t=this;Object(r["e"])(this.chapter).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"修改成功",type:"success"}),t.mGetChapters())})).catch((function(){t.loading=!1}))},mDelChapter:function(t){var e=this;Object(r["b"])({ec_id:t}).then((function(t){t.data&&t.data>0&&(e.$message({message:"删除成功",type:"success"}),e.mGetChapters())}))},addAndUpdate:function(){this.loading=!0,this.add?this.mAddChapter():this.mUpdateChapter()},resetForm:function(){this.add=!0,this.loading=!1,this.chapter={ec_id:null,ec_name:"",ec_priority:"",cum_id:""}},prevClick:function(){this.page.pageNo--,this.mGetChapters()},nextClick:function(){this.page.pageNo++,this.mGetChapters()},currentChange:function(t){this.page.pageNo=t,this.mGetChapters()},curriculumChange:function(){this.mGetChapters()}}},l=u,s=(a("9fa0"),a("2877")),o=Object(s["a"])(l,c,n,!1,null,null,null);e["default"]=o.exports}}]);