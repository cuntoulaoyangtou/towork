(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2a402c0"],{"2be4":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return s}));var n=a("b775");function r(t){return Object(n["a"])({url:"/admin/major/getmajors",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/major/del",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/admin/major/update",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/major/add",method:"post",data:t})}},3902:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:10}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加分类")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.resetForm()}}},[t._v("清空")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-form",{ref:"major",attrs:{"label-position":"top","label-width":"80px",model:t.major}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{model:{value:t.major.m_name,callback:function(e){t.$set(t.major,"m_name",e)},expression:"major.m_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"介绍"}},[a("el-input",{model:{value:t.major.m_intro,callback:function(e){t.$set(t.major,"m_intro",e)},expression:"major.m_intro"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input",{model:{value:t.major.m_priority,callback:function(e){t.$set(t.major,"m_priority",e)},expression:"major.m_priority"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addAndUpdate}},[t._v(t._s(t.add?"添加":"更新"))])],1)],1)])],1),t._v(" "),a("el-col",{attrs:{span:14}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("所有分类")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.mGetMajors}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.majors.filter((function(e){return!t.search||e.m_name.toLowerCase().includes(t.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"编号",prop:"m_id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"分类名称",prop:"m_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"介绍",prop:"m_intro"}}),t._v(" "),a("el-table-column",{attrs:{label:"优先级",prop:"m_priority"}}),t._v(" "),a("el-table-column",{attrs:{align:"right",fixed:"right",width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),[a("el-popconfirm",{attrs:{title:"确定删除"+e.row.m_name+"吗？"},on:{onConfirm:function(a){return t.handleDelete(e.$index,e.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"current-page":t.page.pageNo,"page-size":t.page.pageSize},on:{"prev-click":t.prevClick,"next-click":t.nextClick,"current-change":t.currentChange}})],1)])],1)],1)],1)},r=[],o=(a("ac6a"),a("2be4")),i={name:"GetMajor",data:function(){return{page:{pageNo:1,pageSize:10,s_name:null,total:0},major:{m_id:null,m_name:"",m_intro:"",m_priority:""},majors:[],add:!0,loading:!1,search:""}},created:function(){this.mGetMajors()},onload:function(){},mounted:function(){},methods:{handleEdit:function(t,e){this.major=e,this.add=!1},handleDelete:function(t,e){this.mDelMajor(e.m_id)},mGetMajors:function(){var t=this;this.resetForm(),Object(o["c"])(this.page).then((function(e){t.majors.length>0&&t.majors.splice(0,t.majors.length),t.page.total=e.data.total,e.data.list.forEach((function(e){t.majors.push(e)}))})).catch((function(){}))},mAddMajor:function(){var t=this;Object(o["a"])(this.major).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"添加成功",type:"success"}),t.mGetMajors())})).catch((function(){t.loading=!1}))},mUpdateMajor:function(){var t=this;Object(o["d"])(this.major).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"修改成功",type:"success"}),t.mGetMajors())})).catch((function(){t.loading=!1}))},mDelMajor:function(t){var e=this;Object(o["b"])({m_id:t}).then((function(t){t.data&&t.data>0&&(e.$message({message:"删除成功",type:"success"}),e.mGetMajors())}))},addAndUpdate:function(){this.loading=!0,this.add?this.mAddMajor():this.mUpdateMajor()},resetForm:function(){this.add=!0,this.loading=!1,this.major={m_id:null,m_name:"",m_intro:"",m_priority:""}},prevClick:function(){this.page.pageNo--,this.mGetMajors()},nextClick:function(){this.page.pageNo++,this.mGetMajors()},currentChange:function(t){this.page.pageNo=t,this.mGetMajors()}}},s=i,l=a("2877"),c=Object(l["a"])(s,n,r,!1,null,null,null);e["default"]=c.exports}}]);