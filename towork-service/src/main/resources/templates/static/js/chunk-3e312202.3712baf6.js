(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e312202"],{"11e5":function(t,e,r){"use strict";r.r(e);var u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:10}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("添加课程")]),t._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.resetForm()}}},[t._v("清空")])],1),t._v(" "),r("div",{staticClass:"text item"},[r("el-form",{ref:"curriculum",attrs:{"label-position":"top","label-width":"80px",model:t.curriculum}},[r("el-form-item",{attrs:{label:"课程名称"}},[r("el-input",{model:{value:t.curriculum.cum_name,callback:function(e){t.$set(t.curriculum,"cum_name",e)},expression:"curriculum.cum_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"优先级"}},[r("el-input",{model:{value:t.curriculum.cum_priority,callback:function(e){t.$set(t.curriculum,"cum_priority",e)},expression:"curriculum.cum_priority"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属专业"}},[r("el-select",{attrs:{placeholder:"请选择专业"},model:{value:t.curriculum.m_id,callback:function(e){t.$set(t.curriculum,"m_id",e)},expression:"curriculum.m_id"}},t._l(t.majors,(function(t,e){return r("el-option",{key:e,attrs:{label:t.m_name,value:t.m_id}})})),1)],1),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addAndUpdate}},[t._v(t._s(t.add?"添加":"更新"))])],1)],1)])],1),t._v(" "),r("el-col",{attrs:{span:14}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-row",{staticClass:"ctlyt-line-h",attrs:{gutter:10}},[r("el-col",{attrs:{span:8}},[r("span",[t._v("所有课程")])]),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择专业"},on:{change:t.majorChange},model:{value:t.page.m_id,callback:function(e){t.$set(t.page,"m_id",e)},expression:"page.m_id"}},[r("el-option",{key:"major",attrs:{label:"所有专业",value:0}}),t._v(" "),t._l(t.majors,(function(t,e){return r("el-option",{key:e,attrs:{label:t.m_name,value:t.m_id}})}))],2)],1),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-button",{staticStyle:{float:"right",padding:"3px 0","line-height":"36px"},attrs:{type:"text"},on:{click:t.mGetCurriculums}},[t._v("刷新")])],1)],1)],1),t._v(" "),r("div",{staticClass:"text item"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.curriculums.filter((function(e){return!t.search||e.cum_name.toLowerCase().includes(t.search.toLowerCase())}))}},[r("el-table-column",{attrs:{label:"编号",prop:"cum_id",width:"60"}}),t._v(" "),r("el-table-column",{attrs:{label:"课程名称",prop:"cum_name"}}),t._v(" "),r("el-table-column",{attrs:{label:"优先级",prop:"cum_priority"}}),t._v(" "),r("el-table-column",{attrs:{label:"专业名称",prop:"m_name"}}),t._v(" "),r("el-table-column",{attrs:{align:"right",fixed:"right",width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),[r("el-popconfirm",{attrs:{title:"确定删除《"+e.row.cum_name+"》吗？"},on:{onConfirm:function(r){return t.handleDelete(e.$index,e.row)}}},[r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]]}}])})],1),t._v(" "),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"current-page":t.page.pageNo,"page-size":t.page.pageSize},on:{"prev-click":t.prevClick,"next-click":t.nextClick,"current-change":t.currentChange}})],1)])],1)],1)],1)},a=[],i=(r("7514"),r("ac6a"),r("4f45")),n=r("2be4"),c={name:"Curriculum",data:function(){return{page:{pageNo:1,pageSize:10,cum_name:null,m_id:"",total:0},curriculum:{g_id:null,g_name:"",g_priority:"",s_id:""},curriculums:[],majors:[],add:!0,loading:!1,search:"",visible:!1}},created:function(){var t=this;Object(n["c"])({pageNo:1,pageSize:100,m_name:null}).then((function(e){t.majors.length>0&&t.majors.splice(0,t.majors.length),e.data.list.forEach((function(e){t.majors.push(e)}))})).catch((function(){})),this.mGetCurriculums()},onload:function(){},mounted:function(){},methods:{handleEdit:function(t,e){this.curriculum.cum_id=e.cum_id,this.curriculum.cum_name=e.cum_name,this.curriculum.cum_priority=e.cum_priority,this.curriculum.m_id=e.m_id,this.add=!1},handleDelete:function(t,e){this.visible=!1,this.mDelCurriculum(e.cum_id)},mGetCurriculums:function(){var t=this;this.resetForm(),Object(i["c"])(this.page).then((function(e){t.curriculums.length>0&&t.curriculums.splice(0,t.curriculums.length),t.page.total=e.data.total,e.data.list.forEach((function(e){e.m_name=t.majors.find((function(t){return t.m_id===e.m_id})).m_name,t.curriculums.push(e)}))})).catch((function(){}))},mAddCurriculum:function(){var t=this;Object(i["a"])(this.curriculum).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"添加成功",type:"success"}),t.mGetCurriculums())})).catch((function(){t.loading=!1}))},mUpdateCurriculum:function(){var t=this;Object(i["d"])(this.curriculum).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"修改成功",type:"success"}),t.mGetCurriculums())})).catch((function(){t.loading=!1}))},mDelCurriculum:function(t){var e=this;Object(i["b"])({cum_id:t}).then((function(t){t.data&&t.data>0&&(e.$message({message:"删除成功",type:"success"}),e.mGetCurriculums())}))},addAndUpdate:function(){this.loading=!0,this.add?this.mAddCurriculum():this.mUpdateCurriculum()},resetForm:function(){this.add=!0,this.loading=!1,this.curriculum={cum_id:null,cum_name:"",cum_priority:"",m_id:""}},prevClick:function(){this.page.pageNo--,this.mGetCurriculums()},nextClick:function(){this.page.pageNo++,this.mGetCurriculums()},currentChange:function(t){this.page.pageNo=t,this.mGetCurriculums()},majorChange:function(){this.mGetCurriculums()}}},l=c,o=(r("2328"),r("2877")),s=Object(o["a"])(l,u,a,!1,null,null,null);e["default"]=s.exports},2328:function(t,e,r){"use strict";var u=r("48f7"),a=r.n(u);a.a},"2be4":function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return n})),r.d(e,"a",(function(){return c}));var u=r("b775");function a(t){return Object(u["a"])({url:"/admin/major/getmajors",method:"post",data:t})}function i(t){return Object(u["a"])({url:"/admin/major/del",method:"post",data:t})}function n(t){return Object(u["a"])({url:"/admin/major/update",method:"post",data:t})}function c(t){return Object(u["a"])({url:"/admin/major/add",method:"post",data:t})}},"48f7":function(t,e,r){},"4f45":function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return n})),r.d(e,"a",(function(){return c}));var u=r("b775");function a(t){return Object(u["a"])({url:"/admin/curriculum/getcurriculums",method:"post",data:t})}function i(t){return Object(u["a"])({url:"/admin/curriculum/del",method:"post",data:t})}function n(t){return Object(u["a"])({url:"/admin/curriculum/update",method:"post",data:t})}function c(t){return Object(u["a"])({url:"/admin/curriculum/add",method:"post",data:t})}},7514:function(t,e,r){"use strict";var u=r("5ca1"),a=r("0a49")(5),i="find",n=!0;i in[]&&Array(1)[i]((function(){n=!1})),u(u.P+u.F*n,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)}}]);