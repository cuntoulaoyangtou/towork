(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d4604b2"],{"2a74":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加班级")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.resetForm()}}},[t._v("清空")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-form",{ref:"clazz",attrs:{"label-position":"top","label-width":"80px",model:t.clazz}},[a("el-form-item",{attrs:{label:"班级名称"}},[a("el-input",{model:{value:t.clazz.c_name,callback:function(e){t.$set(t.clazz,"c_name",e)},expression:"clazz.c_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input",{model:{value:t.clazz.c_priority,callback:function(e){t.$set(t.clazz,"c_priority",e)},expression:"clazz.c_priority"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属专业"}},[a("el-select",{attrs:{placeholder:"请选择专业"},model:{value:t.clazz.m_id,callback:function(e){t.$set(t.clazz,"m_id",e)},expression:"clazz.m_id"}},t._l(t.majors,(function(t,e){return a("el-option",{key:e,attrs:{label:t.m_name,value:t.m_id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"所属年级"}},[a("el-cascader",{attrs:{options:t.options,placeholder:"选择年级",getCheckedNodes:!0,props:t.pprops},on:{"visible-change":t.visibleChange,change:t.gradeChange},model:{value:t.opgrades,callback:function(e){t.opgrades=e},expression:"opgrades"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addAndUpdate}},[t._v(t._s(t.add?"添加":"更新"))])],1)],1)])],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{staticClass:"ctlyt-line-h",attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("span",[t._v("所有班级")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择专业"},on:{change:t.curChange},model:{value:t.page.m_id,callback:function(e){t.$set(t.page,"m_id",e)},expression:"page.m_id"}},[a("el-option",{key:"major",attrs:{label:"所有专业",value:0}}),t._v(" "),t._l(t.majors,(function(t,e){return a("el-option",{key:e,attrs:{label:t.m_name,value:t.m_id}})}))],2)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-cascader",{attrs:{options:t.options,"show-all-levels":!1,placeholder:"选择年级",props:{checkStrictly:!0}},on:{"visible-change":t.visibleChange,change:t.gradesChange}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0","line-height":"36px"},attrs:{type:"text"},on:{click:t.mGetClazzs}},[t._v("刷新")])],1)],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.clazzs.filter((function(e){return!t.search||e.c_name.toLowerCase().includes(t.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"编号",prop:"c_id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"c_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"优先级",prop:"c_priority",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"分类名称",prop:"m_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"s_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"年级名称",prop:"g_name"}}),t._v(" "),a("el-table-column",{attrs:{align:"right",fixed:"right",width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),[a("el-popconfirm",{attrs:{title:"确定删除"+e.row.c_name+"吗？"},on:{onConfirm:function(a){return t.handleDelete(e.$index,e.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.page.total,"current-page":t.page.pageNo,"page-size":t.page.pageSize},on:{"prev-click":t.prevClick,"next-click":t.nextClick,"current-change":t.currentChange}})],1)])],1)],1)],1)},i=[],l=(a("7514"),a("ac6a"),a("b775"));function o(t){return Object(l["a"])({url:"/admin/clazz/getclazzs",method:"post",data:t})}function s(t){return Object(l["a"])({url:"/admin/clazz/del",method:"post",data:t})}function r(t){return Object(l["a"])({url:"/admin/clazz/update",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/admin/clazz/add",method:"post",data:t})}var d=a("2be4"),u=a("982e"),p=a("f3fe"),h={name:"Clazz",data:function(){return{page:{pageNo:1,pageSize:10,c_name:null,g_id:"",m_id:"",total:0},clazz:{c_id:null,c_name:"",c_priority:"",g_id:"",m_id:""},clazzs:[],grades:[],majors:[],shools:[],add:!0,loading:!1,search:"",visible:!1,options:[],opgrades:[],pprops:{}}},created:function(){var t=this;Object(p["c"])({pageNo:1,pageSize:100,s_name:null}).then((function(e){t.shools.length>0&&t.shools.splice(0,t.shools.length),e.data.list.forEach((function(e){t.shools.push(e)}))})).catch((function(){})),Object(u["c"])({pageNo:1,pageSize:100,g_name:null}).then((function(e){t.grades.length>0&&t.grades.splice(0,t.grades.length),e.data.list.forEach((function(e){t.grades.push(e)}))})).catch((function(){})),Object(d["c"])({pageNo:1,pageSize:100,m_name:null}).then((function(e){t.majors.length>0&&t.majors.splice(0,t.majors.length),e.data.list.forEach((function(e){t.majors.push(e)}))})).catch((function(){})),this.mGetClazzs()},onload:function(){},mounted:function(){},methods:{handleEdit:function(t,e){this.clazz=e,this.opgrades=e.opgrades,this.add=!1},handleDelete:function(t,e){this.visible=!1,this.mDelClazz(e.c_id)},mGetClazzs:function(){var t=this;this.resetForm(),o(this.page).then((function(e){t.clazzs.length>0&&t.clazzs.splice(0,t.clazzs.length),t.page.total=e.data.total,e.data.list.forEach((function(e){e.m_name=t.majors.find((function(t){return t.m_id===e.m_id})).m_name;var a=t.grades.find((function(t){return t.g_id===e.g_id})),n=t.shools.find((function(t){return t.s_id==a.s_id}));e.g_name=a.g_name,e.s_name=n.s_name,e.opgrades=[n.s_id,a.g_id],t.clazzs.push(e)}))})).catch((function(){}))},mAddClazz:function(){var t=this;c(this.clazz).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"添加成功",type:"success"}),t.mGetClazzs())})).catch((function(){t.loading=!1}))},mUpdateClazz:function(){var t=this;r(this.clazz).then((function(e){e.data&&"SUCCESS"===e.code&&(t.$message({message:"修改成功",type:"success"}),t.mGetClazzs())})).catch((function(){t.loading=!1}))},mDelClazz:function(t){var e=this;s({c_id:t}).then((function(t){t.data&&t.data>0&&(e.$message({message:"删除成功",type:"success"}),e.mGetClazzs())}))},addAndUpdate:function(){this.loading=!0,this.add?this.mAddClazz():this.mUpdateClazz()},resetForm:function(){this.add=!0,this.loading=!1,this.opgrades=null,this.clazz={c_id:null,c_name:"",c_priority:"",g_id:"",m_id:""}},prevClick:function(){this.page.pageNo--,this.mGetClazzs()},nextClick:function(){this.page.pageNo++,this.mGetClazzs()},currentChange:function(t){this.page.pageNo=t,this.mGetClazzs()},curChange:function(){this.mGetClazzs()},visibleChange:function(){var t=this;this.options.length<=0&&(this.options.push({value:0,label:"所有班级"}),this.shools.forEach((function(e){var a=[],n={value:e.s_id,label:e.s_name,children:a};t.grades.forEach((function(t){e.s_id==t.s_id&&a.push({value:t.g_id,label:t.g_name})})),t.options.push(n)})))},gradeChange:function(t){this.clazz.g_id=t[t.length-1]},gradesChange:function(t){switch(t.length){case 1:this.page.g_id=null,this.page.s_id=t[0];break;case 2:this.page.s_id=null,this.page.g_id=t[1];break;default:return}this.mGetClazzs()}}},m=h,f=(a("c966"),a("2877")),g=Object(f["a"])(m,n,i,!1,null,null,null);e["default"]=g.exports},"2be4":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/admin/major/getmajors",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/admin/major/del",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/major/update",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/major/add",method:"post",data:t})}},"5c54":function(t,e,a){},7514:function(t,e,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(l)},"982e":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/admin/grade/getgrades",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/admin/grade/del",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/grade/update",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/grade/add",method:"post",data:t})}},c966:function(t,e,a){"use strict";var n=a("5c54"),i=a.n(n);i.a},f3fe:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/admin/shool/getshools",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/admin/shool/del",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/shool/update",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/shool/add",method:"post",data:t})}}}]);